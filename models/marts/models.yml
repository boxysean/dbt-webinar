version: 2

models:
  - name: dim_customers
    description: >
      A dimensional model of all the customers in our databases. It brings together the
      most important attributes used in common analyses across the organization.
    columns:
      - name: customer_key
        description: Customer primary key, as known from source system
        tests:
          - unique
          - not_null
      - name: name
        description: Customer company name
      - name: address
        description: Customer billing address (not shipping address -- see other column)
      - name: phone
        description: Primary phone number provided for handling general inquiries
      - name: account_balance
        description: Latest account balance recorded in our systems

      - name: market_segment
        description: The area of industry the customer operates within
        tests:
          - accepted_values:
              values:
                - "(unknown)"  # This is from the DV Ghost Record
                - "BUILDING"
                - "FURNITURE"
                - "HOUSEHOLD"
                - "MACHINERY"

  - name: fct_orders
    description: >
      A fact model of all the orders in our databases.
    columns:
      - name: order_key
        description: Order primary key, as known from source system
        tests:
          - unique
          - not_null
      - name: part_count
        description: The number of parts associated with the order
      - name: total_discount
        description: Total amount of discounts applied to the order
      - name: total_tax
        description: Total amount of tax applied to the order
      - name: price
        description: Total price of the order
